// https://adventofcode.com/2024/day/8

#include <iostream>
#include <string>
#include <sstream>
#include <vector>
#include <algorithm>
#include <unordered_map>
#include <stdexcept>
#include <iterator>

using namespace std;

string input1();

int main()
{
    string str;
    int res = 0;
    unordered_map<char, vector<pair<int, int>>> antennas_map;

    int i = 0;
    int j = 0;
    for (stringstream file(input1()); getline(file, str); i++) {
        for (j=0; j<str.size(); j++) {
            char cur_char = str[j];
            if (cur_char == '.') continue;
            antennas_map[cur_char].push_back(make_pair(i,j));
        }
    }
    int height = i;
    int width = j;

    cout << "antennas map size " << antennas_map.size() << endl;

    vector<vector<bool>> visited_vec(height, vector<bool> (width, false));

    for (auto const &a_kv : antennas_map) {
        size_t size = a_kv.second.size();
        cout << "row " << a_kv.first << " size " << size << endl;
        for (int i=0; i< size; i++) {
            pair<int,int> from = a_kv.second[i];
            for (int j=0;j<size;j++) {
                pair<int,int> to = a_kv.second[j];
                if (i == j) continue;
                int i1 = to.first + to.first - from.first;
                int j1 = to.second + to.second - from.second;
                if (0<=i1 && i1<height && 0<=j1 && j1< width) {
                    visited_vec[i1][j1] = true;
                }
            }
        }
    }

    for (auto const &a: visited_vec)
        for (auto const &b: a) if (b) res++;
    

    cout << " res " << res << endl;

    return 0;
}

string input1()
{
    return R"(...........g......................................
......e.g......s.............R...........I........
............g........................I............
..b......Q....s.....................P.............
.......e..T...................K...........P...F...
.....g................U.............4.............
.........b..........4..RU..................1.F....
....a.....Q..........b........R..U...............1
.S...T............s.............I.........f.......
...A....T...............................I.........
.....Qa............A.G...K...........P............
...........................G................1.....
...D...................................4.f........
..................................................
................k.......R....................t....
.........T.e..............K........u.......t......
....................A.............................
......S....a.............F...........KG...........
....D...h......k..................................
..D...............k............................4..
..............................................i...
.........S..................d.....................
......QU....S......s..d...G............i..........
...........d....9...F.h...E.......................
.................d....B...........................
...h........................H.......t.............
.........h.B..3.E.............H..r................
.......E......B......2...5.....H..................
.z...........9................................t...
.....9...D........................................
.....Z.......39..a................................
..........3.............r.........................
...............Er.............................7...
.........................J...k.r.q.......i.8.p....
.......................u...............H.p..q.....
..............................i.u6........p.......
....................................0.............
...............3..J....P...0......................
........................2j........................
...............................j2B0...............
................J..2...5.....6......p....8........
............y.........................7...........
..............5.........y...........6.............
................................j.................
.........................Y.J.....0................
.........................................y........
..................Z...uy...................q......
.......z.........Z............Y.6.............8...
z.........................Y..........7............
....................Z...5..Y......................
)";
}
